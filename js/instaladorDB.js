$(document).ready(function(){function e(e){$(e).on("input",function(){this.setCustomValidity("")})}e("#host"),e("#user"),e("#pass"),e("#nameDB"),$("#installForm").submit(function(e){e.preventDefault();let o=!0,t=$("#host")[0];t.value.match(/^[a-zA-Z0-9.-]+$/)||(t.setCustomValidity("El host solo puede contener letras, n\xfameros, guiones y puntos."),t.reportValidity(),o=!1);let s=$("#user")[0];s.value.match(/^[a-zA-Z0-9_\-!@#\$%\^&\*\(\)\+\=\.\,]{3,}$/)?s.setCustomValidity(""):(s.setCustomValidity("El usuario debe tener al menos 3 caracteres y solo puede contener letras, n\xfameros y ciertos caracteres especiales (-!@#$%^&*()+=.,)."),s.reportValidity(),o=!1);let a=$("#nameDB")[0];if(a.value.match(/^[a-zA-Z0-9_]+$/)||(a.setCustomValidity("El nombre de la base de datos solo puede contener letras, n\xfameros, y guiones bajos."),a.reportValidity(),o=!1),o){var n=new FormData(document.getElementById("installForm"));$.ajax({type:"POST",url:"../controller/instaladorDB.php",data:n,cache:!1,contentType:!1,processData:!1,beforeSend:function(){$("#loader").removeClass("esconder"),$("body").addClass("hidenn")},success:function(e){$("#loader").addClass("esconder"),$("body").removeClass("hidenn"),Swal.fire({icon:"success",title:"Resultado",html:e,showCloseButton:!1,allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"Aceptar"}).then(e=>{e.isConfirmed&&(window.location.href="../inicio/")})},error:function(e,o,t){$("#loader").addClass("esconder"),$("body").removeClass("hidenn");let s="No se pudo conectar con el servidor. Por favor, int\xe9ntalo de nuevo m\xe1s tarde.";e.responseJSON&&e.responseJSON.message?s=e.responseJSON.message:"timeout"===o?s="La solicitud ha caducado. Por favor, int\xe9ntalo de nuevo.":"abort"===o?s="La solicitud fue abortada. Int\xe9ntalo nuevamente.":t&&(s=t),Swal.fire({icon:"error",title:"Error",text:s,showCloseButton:!0,showConfirmButton:!1,allowOutsideClick:!1,allowEscapeKey:!1})}})}})});