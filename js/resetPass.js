$(document).ready(function(){$("#correo","#code").on("input",function(){$(this).get(0).setCustomValidity("")}),$(".btn-sendCode").click(function(e){e.preventDefault();let o=$("#correo").val().trim();if(""===o){$("#correo").get(0).setCustomValidity("El campo de correo no puede estar vac\xedo."),$("#correo")[0].reportValidity();return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){$("#correo").get(0).setCustomValidity("Por favor, ingrese un correo electr\xf3nico v\xe1lido."),$("#correo")[0].reportValidity();return}$.ajax({url:"../controller/resetPass.php",type:"POST",data:{correo:o},beforeSend:function(){$("#loader").removeClass("esconder"),$("body").addClass("hidenn")},success:function(e){var o=JSON.parse(e);$("#loader").addClass("esconder"),$("body").removeClass("hidenn"),1==o.codigo?(Swal.fire({icon:"success",title:"\xc9XITO",html:o.mensaje}),$(".btn-sendCode").prop("disabled",!0),function e(o,r){let t=60,s,i=setInterval(function(){s=(s=parseInt(t%60,10))<10?"0"+s:s,r.text("Reenviar c\xf3digo en "+s+"s"),--t<0&&(clearInterval(i),r.prop("disabled",!1),r.text("Enviar c\xf3digo"))},1e3)}(60,$(".btn-sendCode"))):Swal.fire({icon:"error",title:"Ooops.",html:o.mensaje})}})}),$(".btn-send").click(function(e){e.preventDefault();let o=$("#correo").val().trim(),r=$("#code").val().trim();if(""===o){$("#correo").get(0).setCustomValidity("El campo de correo no puede estar vac\xedo."),$("#correo")[0].reportValidity();return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)){$("#correo").get(0).setCustomValidity("Por favor, ingrese un correo electr\xf3nico v\xe1lido."),$("#correo")[0].reportValidity();return}if(""===r){$("#code").get(0).setCustomValidity("El campo de c\xf3digo no puede estar vac\xedo."),$("#code")[0].reportValidity();return}if(!/^[a-zA-Z0-9]+$/.test(r)){$("#code").get(0).setCustomValidity("El c\xf3digo solo puede contener letras (may\xfasculas y min\xfasculas) y n\xfameros."),$("#code")[0].reportValidity();return}var t=new FormData(document.getElementById("formReset"));$.ajax({url:"../controller/verificarCodigo.php",type:"POST",data:t,cache:!1,contentType:!1,processData:!1,beforeSend:function(){$("#loader").removeClass("esconder"),$("body").addClass("hidenn")},success:function(e){console.log(e);var o=JSON.parse(e);1==o.codigo?window.location.href="../nueva-clave/":($("#loader").addClass("esconder"),$("body").removeClass("hidenn"),Swal.fire({icon:"error",title:"Ooops.",html:o.mensaje}))}})})});