$(document).ready((function(){function a(){$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{opcion:4},success:function(a){var r=$("#tablaImagenesHabitaciones");r.empty(),a.forEach((function(a){r.append(`\n                        <tr>\n                            <td>${a.id_img_habitacion}</td>\n                            <td>${a.id_tipo_habitacion}</td>\n                            <td><img src="../upload/habitaciones/${a.img}" alt="Imagen de Habitación" width="100"></td>\n                            <td>\n                                <button class="btnEliminarImagenHabitacion" data-id-imagen-habitacion="${a.id_img_habitacion}">Eliminar</button>\n                            </td>\n                        </tr>\n                    `)}))},error:function(a,r,o){console.error("Error al cargar las imágenes de habitaciones:",o)}})}function r(){$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{opcion:7},success:function(a){var r=$("#tablaReservas");r.empty(),a.forEach((function(a){r.append(`\n                            <tr>\n                                <td>${a.id_reserva}</td>\n                                <td>${a.id_habitacion}</td>\n                                <td>${a.nombre_cliente}</td>\n                                <td>${a.fecha_entrada}</td>\n                                <td>${a.fecha_salida}</td>\n                                <td>\n                                    <button class="btnEliminarReservaAdmin" data-id-reserva="${a.id_reserva}">Eliminar</button>\n                                </td>\n                            </tr>\n                        `)}))},error:function(a,r,o){console.error("Error al cargar las reservas:",o)}})}function o(){$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{opcion:11},success:function(a){var r=$("#tablaComentarios");r.empty(),a.forEach((function(a){r.append(`\n                            <tr>\n                                <td>${a.id_comentario}</td>\n                                <td>${a.id_hotel}</td>\n                                <td>${a.id_usuario}</td>\n                                <td>${a.comentario}</td>\n                                <td>${a.fecha}</td>\n                                <td><button class="btnEliminarComentarioAdmin" data-id-comentario="${a.id_comentario}">Eliminar</button></td>\n                            </tr>\n                        `)}))},error:function(a,r,o){console.error("Error al cargar los comentarios:",o)}})}function t(a){$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{opcion:19,filtro:a},success:function(a){$("#ventasTotales").text("Ventas Totales: $"+a.total)},error:function(a,r,o){console.error("Error al cargar las ventas totales:",o)}})}$("#btnMostrarFormulario").click((function(){$("#formularioHabitacion").toggle()})),$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{opcion:1},success:function(a){var r=$("#tipoHabitacion");r.empty(),a.forEach((function(a){r.append('<option value="'+a.id_tipo_habitacion+'">'+a.nombre_tipo+"</option>")}))},error:function(a,r,o){console.error("Error al cargar los tipos de habitaciones:",o)}}),$("#formHabitacion").submit((function(a){a.preventDefault();var r=new FormData(this);r.append("opcion",2),$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:r,processData:!1,contentType:!1,success:function(a){1===a.codigo?(Swal.fire("Éxito","Habitación registrada exitosamente.","success"),$("#formHabitacion")[0].reset()):Swal.fire("Error",a.mensaje,"error")},error:function(a,r,o){console.error("Error al registrar la habitación:",o)}})})),a(),$("#formImagenHabitacion").submit((function(r){r.preventDefault();var o=new FormData(this);o.append("opcion",5),$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:o,processData:!1,contentType:!1,success:function(r){1===r.codigo?(Swal.fire("Éxito","Imagen de habitación registrada exitosamente.","success"),a(),$("#formImagenHabitacion")[0].reset()):Swal.fire("Error",r.mensaje,"error")},error:function(a,r,o){console.error("Error al registrar la imagen de la habitación:",o)}})})),$(document).on("click",".btnEliminarImagenHabitacion",(function(){var r=$(this).data("id-imagen-habitacion");$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{idImagenHabitacion:r,opcion:6},success:function(r){1===r.codigo?(Swal.fire("Éxito","Imagen de habitación eliminada exitosamente.","success"),a()):Swal.fire("Error",r.mensaje,"error")},error:function(a,r,o){console.error("Error al eliminar la imagen de la habitación:",o)}})})),r(),$(document).on("click",".btnEliminarReservaAdmin",(function(){var a=$(this).data("id-reserva");$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{idReserva:a,opcion:10},success:function(a){1===a.codigo?(Swal.fire("Éxito","Reserva eliminada exitosamente.","success"),r()):Swal.fire("Error",a.mensaje,"error")},error:function(a,r,o){console.error("Error al eliminar la reserva:",o)}})})),o(),$(document).on("click",".btnEliminarComentarioAdmin",(function(){var a=$(this).data("id-comentario");$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{idComentario:a,opcion:14},success:function(a){1===a.codigo?(Swal.fire("Éxito","Comentario eliminado exitosamente.","success"),o()):Swal.fire("Error",a.mensaje,"error")},error:function(a,r,o){console.error("Error al eliminar el comentario:",o)}})})),$("#filtroVentas").change((function(){t($(this).val())})),t("dia"),$.ajax({url:"../controller/reservasController.php",type:"POST",dataType:"json",data:{opcion:20},success:function(a){var r=$("#graficoUsuariosHoteles"),o=$("#graficoUsuariosSitios"),t=$("#graficoUsuariosRestaurantes"),e=r[0].getContext("2d"),n=o[0].getContext("2d"),i=t[0].getContext("2d");new Chart(e,{type:"pie",data:{labels:["Hoteles","Sitios","Restaurantes"],datasets:[{data:[a.hoteles,a.sitios,a.restaurantes],backgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]}}),new Chart(n,{type:"pie",data:{labels:["Hoteles","Sitios","Restaurantes"],datasets:[{data:[a.hoteles,a.sitios,a.restaurantes],backgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]}}),new Chart(i,{type:"pie",data:{labels:["Hoteles","Sitios","Restaurantes"],datasets:[{data:[a.hoteles,a.sitios,a.restaurantes],backgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]}})},error:function(a,r,o){console.error("Error al cargar las estadísticas:",o)}})}));